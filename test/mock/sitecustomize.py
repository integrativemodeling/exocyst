import ihm
try:
    import ihm.reference
except ImportError:
    pass
import os

# If we're running from an SGE job, override the from_pubmed_id() and
# from_accession() functions to return cached values, since we don't have
# network access (needed to query PubMed or UniProt directly)

def mock_from_pubmed(cls, pubmed_id):
    return ihm.Citation(
            pmid=32239688,
            title='Integrative structure and function of the yeast '
                  'exocyst complex.',
            journal='Protein Sci', volume=29, page_range=(1486,1501),
            year=2020, doi='10.1002/pro.3863', authors=[
                'Ganesan SJ', 'Feyder MJ', 'Chemmama IE', 'Fang F', 'Rout MP',
                'Chait BT', 'Shi Y', 'Munson M', 'Sali A'])

# Auto-generated by util/get_accession_map.py
accession_map = {
    'P33332': {'db_code':'SEC3_YEAST', 'sequence':
        'MRSSKSPFKRKSHSRETSHDENTSFFHKRTISGSSAHHSRNVSQGAVPSSAPPVSGGNYSHKRNVS'
        'RASNSSQTSNFLAEQYERDRKAIINCCFSRPDHKTGEPPNNYITHVRIIEDSKFPSSRPPPDSKLE'
        'NKKKRLLILSAKPNNAKLIQIHKARENSDGSFQIGRTWQLTELVRVEKDLEISEGFILTMSKKYYW'
        'ETNSAKERTVFIKSLITLYIQTFEGHVPELVNWDLSLFYLDERSYQRAVITNRPGSVSPIKSPTSN'
        'FTTNTTQSVGSVPFSAPTERTRRSETESVNPVSTPASVEYHAGMKSLNKAPYSSNSTLNEVNKRYE'
        'LEQQQQQEEAELRRLEEQKRLQLQKENEMKRLEEERRIKQEERKRQMELEHQRQLEEEERKRQMEL'
        'EAKKQMELKRQRQFEEEQRLKKERELLEIQRKQREQETAERLKKEEQEALAKKEEEEKSKRNKVDN'
        'ESYTQEINGKVDNLLEDLNAVLAEETETTPTMQNGTYVPERSTARAHDQLKKPLNIAKVESLGGSD'
        'LNDSISLSDEIAGLNTSNLSGEDQDEKNDLSFEKGDEVRYSNNFEGEAPHVYHEVSIIQEEAPAVS'
        'QKLILPEENNESEALIESKEEIKTMENIDDEVLLEILTDINWSIEDDADSMIERIDLRLAETEYLF'
        'NQNLLSLQKIGPNIRPYEDKVNDECHRIIPTLSLFLMEMSNFSNDIENVESQDNGLQVESANKKLL'
        'WNTLDELLKTVSLDEISLNQLLECPIREKNLPWMENQLNLLLKAFQAIGSDGNEVEYNLREISGLK'
        'QRLQFYEKVTKIFLNRIVEEMQKKFSNIRGQDISHDQMIRILTTLLIFSPLILFCKEISQKSYQAI'
        'VENWNVSIQPVYMELWTKKISQLQGIDTNDEKMNELSLSQLLNEWDTFRKERKTNDINPVFKNSFS'
        'LLTECLQTMRQECIVYQNFVEVFFHISSKHNFEEYIKHFNDPDAPPILLDTVKVMQSDREAAVIET'
        'QLVSRIFQPIVTRLSSYFVELVKAEPTVAPALTFYLENEIKSLESSNHEFLLSAVTRMYTQIKQVW'
        'SDNVEEQVLHFERISNATTNGEILPGILDLPVGLKNSEDLFQFAKRSMDIKDTDEGYESIELMNSS'
        'FRKLSIAATRSITHKEVNSSINPNLSDTAALNNDYMETISLLVNSNWLTEMLSMLNFNKDGIFDTS'
        'LQNVKKVFDVEKESYASFLLRDTMPKLTAFVYGVSNIIENTNNVNMTNPSRWAAYSRQNLENILLA'
        'YTSHEIETLVKRLHTHMVNDFGYHQENAINNVLCDKLWSCIQGQTVSLYLKLYTVIDKHYRGTNIR'
        'FTKNDIISAFEEYKNA'},
    'P89102': {'db_code':'SEC5_YEAST', 'sequence':
        'MDRFQIGDEQLLRFYQLKTINPTHSWAQDSSKLNNEEATSNELGVETSFDILKDFKYGNQISIDKE'
        'SRAYLNDESLSYIRDPLNGQEMSKELQHLPNDSMRLNYLVNSKQFNVKAFLRDMHKQDSFNDLNNS'
        'LDRLDSDIQDQSIHLKQLVGKNFTKYVKIKNKLDQIYKEFDEKTNEKNQCDSPKENQINVESLNKK'
        'VDEVIRTTTFKLKPLMDNYQKILNYQATKKFIELNKFYFNLPKSLKRCLTNNDFNEFIIEYSKGLT'
        'LRRRFNQSSDASQSLVIKRIWTQIENLLVTYKDLIWNSLINSNFNIDQPQETILSLFSKLLNLENF'
        'INNNQRESESGNKNTTSSSNENPILRWMSIKMNGFQNELNELSGHMISKIIHSQRLILQNNTNQDK'
        'SQGCVELSYYLKINQLFQIISDTGKDSEGLKSTVEPNKVNTISGTSYLNLNCQPSSQGLTDSPTII'
        'EMWLLILKYINDLWKICDQFIEFWEHIEKFLDGTYQNSIINEKRKENILIGDSNIIESYQKSLILK'
        'EEQINEVRLKGEEFITSVSQNLISFFTSSQSSLPSSLKDSTGDITRSNKDSGSPLDYGFIPPNCNG'
        'LSCLRYLPKIVEPILKFSTELAQLNITTNGITICRNTLSTIINRCVGAISSTKLRDISNFYQLENW'
        'QVYETVTFSSKSQDSSKNLTFEYGVTQFPEIVTSFQEVSIKTTRDLLFAYEKLPIINGISVVSYPS'
        'KQLLTGIEIQQIISMEAVLEAILKNAAKDKDNPRNSHTILTLTNLQYFRECAFPNILQYFDDAFEW'
        'NLASKNLELFSLLSKMESSIFGNYLSDLKINLRDTLEEKFHEINWPMYTSNSFRVGDYIIEALMIL'
        'IVVHSECFRIGPQLIHKILIETQIFIARYLFEAFKPYVGNLSNDGSLQIIVDLEFFQKVMGPLLEK'
        'DTEATLRACLQNCFQNDTNRLQKCINEINPIVSANLKRTAIQFAAFS'},
    'P32844': {'db_code':'SEC6_YEAST', 'sequence':
        'MSSDPLQQVCDLIKGDLSLERVRDIKEQLLKEKSVVEYQLNKESDKYYGEVEESLKLLNLSKNSVT'
        'SIKQQINEVNKLGNDNRFAINRYDILFRATKLYETVNTTSSIYDRIYNFVALMEHIERLLVAELAE'
        'DALETGCPHLLEIHFLLTSARDFQEQVVVMAKEATEDAQRTVMKLFSRLSGIISKFDKLLDGLTYD'
        'IVEMARAEQISLAIRLFKIYDLEEREDLRIEAIRNIIKKKEIEIEKSSIKKLPNSKNTARLQDETP'
        'KVIEYPTNKGLYQEIMSGTISTRTAPRGYKHFLINGINNSISEMFGEMREKYVGDQKFDVLDNMDW'
        'IFNELIIVKEHIANCCPPHWNIFEVYFDQYYKELHSLITDLVESEPETIIILDILAFDKTFQDTLK'
        'QDFGFTKSEVKSVIGDKEKETLFKDYLNLIVVKMTEWIGNLEKAEFDVFLERSTPPHSDSDGLLFL'
        'DGTKTCFQMFTQQVEVAAGTNQAKILVGVVERFSDLLTKRQKNWISKISEEIKKQINYNHKYDIDP'
        'ESITPEDECPGGLVEYLIAVSNDQMKAADYAVAISSKYGKLVSKVYEKQITNHLEGTLDGFAEVAQ'
        'CSSLGLITLMFDDLRKPYQEIFSKTWYMGSQAQQIADTLDEYLLDIKPQMNSVLFVNFIDNVIGET'
        'IIKFLTALSFEHSFKNKNNKFLEAMKRDFEIFYQLFVKVLDGNESKDTLITQNFTVMEFFMDLSCE'
        'PIDSILDIWQKYLEVYWDSRIDLLVGILKCRKDVSSSERKKIVQQATEMLHEYRRNMEANGVDREP'
        'TLMRRFVLEFEKQ'},
    'P32855': {'db_code':'SEC8_YEAST', 'sequence':
        'MDYLKPAQKGRRRGLSINSLSETQQSAMNSSLDHLQNDLNRINLQWNRILSDNTNPLELALAFLDD'
        'TSVGLGHRYEEFNQLKSQIGSHLQDVVNEHSQVFNTNVASYGKAVSSIMQAQEQTLNLKNCLKEAN'
        'EKITTDKGSLQELNDNNLKYTKMIDVLVNIEELLQIPEKIEENIRKENFHQVQILLERGFILMNNK'
        'SLKTVEILKPINQQLELQEHLLFNNLIEEIHDIMYSKSNKTNFTRVTNNDIFKIISISHNGFTSLE'
        'NYLYNIVNIDIMEHSKTINKNLEQFIHDQSLNKGNIMLQENAATQAPLAPSRNQENEGFNRIGFLL'
        'KTINNINKLPVAFNIITERAKEEIHNIIVKSTESIRSKHPSLLKMATSLKNDNHFGLPVQDILSII'
        'LRECFWEIFLKLLYAIQCHRAIFEMSNILQPTSSAKPAFKFNKIWGKLLDEIELLLVRYINDPELI'
        'SSNNGSIKPINGATNNAPTLPKRKNPKIFSLEYNIEDNSSVKDQAFELKALLKDIFPGFSVSSNMD'
        'LDSIYVKDESFEQDEPLVPPSVFNMKVILDPFLLFTQSTSTIVPSVLTQNTISSLTFFDDYMNKSF'
        'LPKIQMTMDYLFTVEVESNNPYALELSDENHNIFKTALDFQRLFYNLLNVFNTANTFREKISYCIL'
        'DLLNHFYNYYLGLFNSLIGTSDRHLTRKIITAWLQNGILMDQEQKILNGDETLFHEESIELFKEIP'
        'HFYQAGKGLSKSDLFNNLTLDTILQFSASVLWILNWLPGLKKAINIDEVSQEPMLDADRLRSSWTF'
        'SESMDLNYSNPSSSPNSLGNLKILLDDKASKKFDETIDGFKTLKFKLITILRFNIRALCIYDIGSF'
        'FQNTKIWNMDVGSIELDQNIASLISELRRTESKLKQQLPEKEKNSIFIGLDIVNNYALIKGAKSIK'
        'VLNHNGIKKMLRNVNVLQHAYRNLSSEPSKINMNVTMNFYSLCGSSEAELFEYIKDNELPHCSVED'
        'LKTILRLQFSEEMHRQLKRQSTSSTKGSIKPSNKRYTEALEKLSNLEKEQSKEGARTKIGKLKSKL'
        'NAVHTANEK'},
    'Q06245': {'db_code':'SEC10_YEAST', 'sequence':
        'MNSLYELDPKWKKLLKTDNFLGGLTVNEFVQELSKDHRNDVLIDANTKNLPTNEKDQDAIREAIWK'
        'QLDPKPYIRTFESTLKELKNLNEETLNKRQYFSEQVATQEVIHSENVIKLSKDLHTTLLTFDKLDD'
        'RLTNVTQVVSPLGDKLETAIKKKQNYIQSVELIRRYNDFYSMGKSDIVEQLRLSKNWKLNLKSVKL'
        'MKNLLILSSKLETSSIPKTINTKLVIEKYSEMMENELLENFNSAYRENNFTKLNEIAIILNNFNGG'
        'VNVIQSFINQHDYFIDTKQIDLENEFENVFIKNVKFKEQLIDFENHSVIIETSMQNLINDVETVIK'
        'NESKIVKRVFEEKATHVIQLFIQRVFAQKIEPRFEVLLRNSLSISNLAYVRILHGLFTLFGKFTKS'
        'LIDYFQLLEIDDSNQILSTTLEQCFADLFSHYLYDRSKYFGIEKRSLEAILVDMTSKFTVNYDKEI'
        'NKRVLLDKYKEKLSTNVDAFMHSPRGNTHSRQDSTSRSKLSQFNSFLKTHLDKDHLSLNRTNTLSD'
        'SFNNSSSSTQYDVANNSSSLVNSSFTASDIDNSPNSPANYSLNDVDSMLKCVVESTARVMELIPNK'
        'AHLYILEILKIMFLGIVDSYMEIALEVAYWKICKVDINKTAGVVNLNFLKFISMSTEILDLLSISI'
        'KSIFLPLLNNSPEIKAQIIEMTNSQIQKMEILINIILQETITVISTKFSAILCKQKKKDFVPKSQE'
        'LLDQDTLPAIEIVNILNLIFEQSSKFLKGKNLQTFLTLIGEELYGLLLSHYSHFQVNSIGGVVVTK'
        'DIIGYQTAIEDWGVASLIDKFATLRELANLFTVQPELLESLTKEGHLADIGRDIIQSYISNREDFN'
        'HDNFINSVKLNFR'},
    'P22224': {'db_code':'SEC15_YEAST', 'sequence':
        'MDQEGQPLLSKDFQQVLLATASGNNSSWTERAVLNNESTDAVKHEPALGQNDVFDLDPLSFDKWVP'
        'FLRRALDKNQLDPVIDELENSIEDNFQGLELQLLQDSQMNDKLETSIDEIANIQGMVQDTLSSEIS'
        'KFQIRLSESANELIVKKQMYVNNKKISLKISEATILITKVVRILELSSKCQELITERKFFKVLQNL'
        'DSLEKLYLQEFKNYNFQFLIEIYNSIPFLQKVTKDECINLIRNSLNLNLGKNLIKVGQEFVAIYEN'
        'ELLPQWLETRSKMKLTNFKFNSPIEISMRDESFLAKLNLGEFFQLDDFHDSIMIFQNLNELSVLSG'
        'EFNKEYELRKTKLMYPLIWKKNKTAAYQMDSLLRGTGTTPGSTAHDVSTDDPFTQSLSLHFLQDYF'
        'LKILGFLLYDINLNKATEFILVDNNYNSTNEFWDGLMDRLSPYLSYFIDEKLKTEEDMIKLKDFLC'
        'IYVAILENFKLNIEPLYKILVSIFEKFCSVSLRAFDDEFQILLNDDDFMPLSINDKTLYEKVLKIC'
        'WMKEGEHLSLPDPTNGEPFAVTLPFSPLYPMTCTLAKKTYSKITAFLSIFYRHELHTLNNILVKTM'
        'DDIFNDIVNKKIRSKLESTSREEIAQILVNLDYFIIAAKEFSNFMTRENILQNPDMEIRLSSIKYL'
        'AESRKLAETKLIELIDSKISDILETIEIDWQITEVRQDPDISIIDLAQFLEMMFASTLQNLPYSVQ'
        'TLLIFREFDSLTRQFMGLLLHDTPSTITHESIMNFEVDVNYLESIIPRIFPSTPGTIDSNGYQSPM'
        'TPSTPTFPNANGVDAPTLFENNIKSLEATFMELKQCIELLKTQGKDYNEPEIRLRKYSRIRQEDAA'
        'LLLSKIQHFVSSVEGANGDDTSVMDSSSIFNSESASVIDSNTSRIAKFFNRR'},
    'P19658': {'db_code':'EXO70_YEAST', 'sequence':
        'MPAEIDIDEADVLVLSQELQKTSKLTFEINKSLKKIAATSNQSSQLFTPILARNNVLTTLQRNIES'
        'TLNSVASVKDLANEASKYEIILQKGINQVGLKQYTQVVHKLDDMLEDIQSGQANREENSEFHGILT'
        'HLEQLIKRSEAQLRVYFISILNSIKPFDPQINITKKMPFPYYEDQQLGALSWILDYFHGNSEGSII'
        'QDILVGERSKLILKCMAFLEPFAKEISTAKNAPYEKGSSGMNSYTEALLGFIANEKSLVDDLYSQY'
        'TESKPHVLSQILSPLISAYAKLFGANLKIVRSNLENFGFFSFELVESINDVKKSLRGKELQNYNLL'
        'QDCTQEVRQVTQSLFRDAIDRIIKKANSISTIPSNNGVTEATVDTMSRLRKFSEYKNGCLGAMDNI'
        'TRENWLPSNYKEKEYTLQNEALNWEDHNVLLSCFISDCIDTLAVNLERKAQIALMPNQEPDVANPN'
        'SSKNKHKQRIGFFILMNLTLVEQIVEKSELNLMLAGEGHSRLERLKKRYISYMVSDWRDLTANLMD'
        'SVFIDSSGKKSKDKEQIKEKFRKFNEGFEDLVSKTKQYKLSDPSLKVTLKSEIISLVMPMYERFYS'
        'RYKDSFKNPRKHIKYTPDELTTVLNQLVR'},
    'P38261': {'db_code':'EXO84_YEAST', 'sequence':
        'MVEFSLKKARNNWKHVKKSASSPAKQKTPPSPAKPKQKTKKNPYSDLKDPATSYTLPTINARERSR'
        'VATSMQRRLSIHNTNYAPPTLDYSMPLPDMPNMIVPNDNVDSSHNNSSFTTENESVSSKGPSNSLN'
        'LSTADLSLNDSSYNKVPARSAMRNTVNPSGSNDPFNNSTSLRKMLANPHFNAKDFVHDKLGNASAI'
        'TIDKFTSNLTDLSIQVQEEVKLNINKSYNEIMTVNNDLNVAMLELKRVRANINDLNEVLDQCTKIA'
        'EKRLQLQDQIDQERQGNFNNVESHSNSPALLPPLKAGQNGNLMRRDRSSVLILEKFWDTELDQLFK'
        'NVEGAQKFINSTKGRHILMNSANWMELNTTTGKPLQMVQIFILNDLVLIADKSRDKQNDFIVSQCY'
        'PLKDVTVTQEEFSTKRLLFKFSNSNSSLYECRDADECSRLLDVIRKAKDDLCDIFHVEEENSKRIR'
        'ESFRYLQSTQQTPGRENNRSPNKNKRRSMGGSITPGRNVTGAMDQYLLQNLTLSMHSRPRSRDMSS'
        'TAQRLKFLDEGVEEIDIELARLRFESAVETLLDIESQLEDLSERISDEELMLLNLISLKIEQRREA'
        'ISSKLSQSILSSNEIVHLKSGTENMIKLGLPEQALDLFLQNRSNFIQDLILQIGSVDNPTNYLTQL'
        'AVIRFQTIKKTVEDFQDIFKELGAKISSILVDWCSDEVDNHFKLIDKQLLNDEMLSPGSIKSSRKQ'
        'IDGLKAVGLDFVYKLDEFIKKNSDKIR'},
}

if 'JOB_ID' in os.environ:
    ihm.Citation.from_pubmed_id = classmethod(mock_from_pubmed)
    if hasattr(ihm, 'reference'):
        def from_acc(cls, accession):
            return cls(accession=accession, **accession_map[accession])
        ihm.reference.UniProtSequence.from_accession = classmethod(from_acc)
